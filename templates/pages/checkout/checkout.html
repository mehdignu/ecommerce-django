{% extends 'base.html' %} 
{% load static %} 
{% load crispy_forms_tags %}
{% load cart_template_tags %}
{% load i18n %}

{% block head_title %}Checkout{% endblock %}


{% block content %}


    {% include 'partials/_checkout_title.html' %}
    <!-- Page Content-->
    <div class="container pb-5 mb-2 mb-md-4">
      <div class="row">
        <section class="col-lg-8">
          <!-- Steps-->
          <div class="steps steps-light pt-2 pb-3 mb-5">
            
            <a class="step-item active">
            <div class="step-progress"><span class="step-count">1</span></div>
            <div class="step-label"><i class="czi-cart"></i>Cart</div></a>

            <a class="step-item active current">
            <div class="step-progress"><span class="step-count">2</span></div>
            <div class="step-label"><i class="czi-user-circle"></i>Your details</div></a>
            
            <a class="step-item">
            <div class="step-progress"><span class="step-count">3</span></div>
            <div class="step-label"><i class="czi-user-circle"></i>Billing details</div></a>
            
            <a class="step-item">
            <div class="step-progress"><span class="step-count">4</span></div>
            <div class="step-label"><i class="czi-package"></i>Shipping</div></a>
            
            <a class="step-item">
            <div class="step-progress"><span class="step-count">5</span></div>
            <div class="step-label"><i class="czi-card"></i>Payment</div></a>
            
            <a class="step-item">
            <div class="step-progress"><span class="step-count">6</span></div>
            <div class="step-label"><i class="czi-check-circle"></i>Review</div></a>
          </div>
     
          <!-- Shipping address-->
          <h2 class="h6 pt-1 pb-3 mb-3 border-bottom">Shipping address {{first_name}}</h2>
          <div class="row">

            <form action="" method="POST" class="card-body">
              {% csrf_token %}

              {{ wizard.management_form }}
              
          {% if wizard.form.forms %}

              {{ wizard.form.management_form }}

              {% for form in wizard.form.forms %}
              <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-fn">First Name</label>
                {{ form.first_name }}
              </div>
            </div>

            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-ln">Last Name</label>
                {{ form.last_name }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-email">E-mail Address</label>
                {{ form.email }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-phone">Phone Number</label>
                {{ form.telephone }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-company">Company</label>
                {{ form.company }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-country">Country</label>
                {{ form.country }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-address">Address</label>
                {{ form.address }}
              </div>
            </div>

            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-city">City</label>
                {{ form.city }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-street">Street</label>
                {{ form.street }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-region">Region</label>
                {{ form.region }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-zip">Zip</label>
                {{ form.zip }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-fax">fax</label>
                {{ form.fax }}
              </div>
            </div>
          </div>
          <h6 class="mb-3 py-3 border-bottom">Billing address</h6>
          <div class="custom-control custom-checkbox">
            {{ form.same_billing_address }}
            <label class="custom-control-label" for="same-address">Same as shipping address</label>
          </div>

          {% endfor %}
          {% else %}
          
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-fn">First Name</label>
                {{ wizard.form.first_name }}
              </div>
            </div>

            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-ln">Last Name</label>
                {{ wizard.form.last_name }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-email">E-mail Address</label>
                {{ wizard.form.email }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-phone">Phone Number</label>
                {{ wizard.form.telephone }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-company">Company</label>
                {{ wizard.form.company }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-country">Country</label>
                {{ wizard.form.country }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-address">Address</label>
                {{ wizard.form.address }}
              </div>
            </div>

            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-city">City</label>
                {{ wizard.form.city }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-street">Street</label>
                {{ wizard.form.street }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-region">Region</label>
                {{ wizard.form.region }}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-zip">Zip</label>
                {{ wizard.form.zip }}
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label for="checkout-fax">fax</label>
                {{ wizard.form.fax }}
              </div>
            </div>
          </div>
          <h6 class="mb-3 py-3 border-bottom">Billing address</h6>
          <div class="custom-control custom-checkbox">
            {{ wizard.form.same_billing_address }}
            <label class="custom-control-label" for="same-address">Same as shipping address</label>
          </div>

          {% endif %}
          <!-- Navigation (desktop)-->
          <div class="d-none d-lg-flex pt-4 mt-3">
            {% if wizard.steps.prev %}
            
              <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}">{% trans "first step" %}</button>
              <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">{% trans "prev step" %}</button>

            {% endif %}

              <div class="w-50 pl-2"><button class="btn btn-primary btn-block" type="submit" value="{% trans "submit" %}"><span class="d-none d-sm-inline">Proceed to Shipping</span><span class="d-inline d-sm-none">Next</span><i class="czi-arrow-right mt-sm-0 ml-1"></i></button></div>

          </div>
        </section>

        {% include "partials/_checkout_sidebar.html" %}

      </div>
      <!-- Navigation (mobile)-->
      <div class="row d-lg-none">
        <div class="col-lg-8">
          <div class="d-flex pt-4 mt-3">
            {% if wizard.steps.prev %}
            
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}">{% trans "first step" %}</button>
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">{% trans "prev step" %}</button>

          {% endif %}
          
          <div class="w-50 pl-2"><button class="btn btn-primary btn-block" type="submit" value="{% trans "submit" %}"><span class="d-none d-sm-inline">Proceed to Shipping</span><span class="d-inline d-sm-none">Next</span><i class="czi-arrow-right mt-sm-0 ml-1"></i></button></div>
        </form>
          
        </div>
        </div>
      </div>
    </div>


{% endblock content %}